---
title: 形成查詢以搜尋儲存在網站上的敏感資料
ms.author: chrfox
author: chrfox
manager: laurawi
ms.date: 6/29/2018
audience: Admin
ms.topic: article
ms.service: O365-seccomp
ms.collection:
- M365-security-compliance
localization_priority: Normal
search.appverid:
- MOE150
- MET150
description: 通过 SharePoint Online 中的数据丢失防护 （DLP），您可以发现包含整个租户敏感数据的文档。 探索文件之後，您可以與文件擁有者協力保護資料。 本主題可以協助您進行查詢，以搜尋敏感資料。
ms.openlocfilehash: c9013e8334a4ef891885c7bc53b746b2db42b156
ms.sourcegitcommit: 1162d676b036449ea4220de8a6642165190e3398
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/20/2019
ms.locfileid: "37077029"
---
# <a name="form-a-query-to-find-sensitive-data-stored-on-sites"></a><span data-ttu-id="62181-105">形成查詢以搜尋儲存在網站上的敏感資料</span><span class="sxs-lookup"><span data-stu-id="62181-105">Form a query to find sensitive data stored on sites</span></span>

<span data-ttu-id="62181-106">使用者經常會在網站上儲存敏感資料，例如信用卡號碼、身分證字號，或其他個人資料，長期下來，這會讓組織處於資料遺失的巨大風險中。</span><span class="sxs-lookup"><span data-stu-id="62181-106">Users often store sensitive data, such as credit card numbers, social security numbers, or personal, on their sites, and over time this can expose an organization to significant risk of data loss.</span></span> <span data-ttu-id="62181-107">存储在网站上的文档（包括 OneDrive 业务网站）可以与组织外部不应访问信息的人员共享。</span><span class="sxs-lookup"><span data-stu-id="62181-107">Documents stored on sites—including OneDrive for Business sites—could be shared with people outside the organization who shouldn't have access to the information.</span></span> <span data-ttu-id="62181-108">通过 SharePoint Online 中的数据丢失防护 （DLP），您可以发现包含整个租户敏感数据的文档。</span><span class="sxs-lookup"><span data-stu-id="62181-108">With data loss prevention (DLP) in SharePoint Online, you can discover documents that contain sensitive data throughout your tenant.</span></span> <span data-ttu-id="62181-109">探索文件之後，您可以與文件擁有者協力保護資料。</span><span class="sxs-lookup"><span data-stu-id="62181-109">After discovering the documents, you can work with the document owners to protect the data.</span></span> <span data-ttu-id="62181-110">本主題可以協助您進行查詢，以搜尋敏感資料。</span><span class="sxs-lookup"><span data-stu-id="62181-110">This topic can help you form a query to search for sensitive data.</span></span>
  
> [!NOTE]
> <span data-ttu-id="62181-111">电子发现或电子数据展示和 DLP 是需要[SharePoint 在线计划 2](https://go.microsoft.com/fwlink/?LinkId=510080)的高级功能。</span><span class="sxs-lookup"><span data-stu-id="62181-111">Electronic discovery, or eDiscovery, and DLP are premium features that require [SharePoint Online Plan 2](https://go.microsoft.com/fwlink/?LinkId=510080).</span></span> 
  
## <a name="forming-a-basic-dlp-query"></a><span data-ttu-id="62181-112">形成基本 DLP 查詢</span><span class="sxs-lookup"><span data-stu-id="62181-112">Forming a basic DLP query</span></span>

<span data-ttu-id="62181-113">基本 DLP 查詢是由三個部分組成：SensitiveType、計數範圍及信賴範圍。</span><span class="sxs-lookup"><span data-stu-id="62181-113">There are three parts that make up a basic DLP query: SensitiveType, count range, and confidence range.</span></span> <span data-ttu-id="62181-114">如下图所示，**敏感类型："\<\>类型"** 是必需的，**|\<计数范围\>** 和**|\<置信范围\>** 都是可选的。</span><span class="sxs-lookup"><span data-stu-id="62181-114">As illustrated in the following graphic, **SensitiveType:"\<type\>"** is required, and both**|\<count range\>** and**|\<confidence range\>** are optional.</span></span> 
  
![查詢範例分為必要和選用](media/DLP-query-example-text.png)
  
### <a name="sensitive-type---required"></a><span data-ttu-id="62181-116">敏感類型 - 必要</span><span class="sxs-lookup"><span data-stu-id="62181-116">Sensitive type - required</span></span>

<span data-ttu-id="62181-117">那麼各個部分分別是什麼？</span><span class="sxs-lookup"><span data-stu-id="62181-117">So what is each part?</span></span> <span data-ttu-id="62181-118">SharePoint DLP 查询通常从属性`SensitiveType:"`开始，从[敏感信息类型清单](https://go.microsoft.com/fwlink/?LinkID=509999)中输入信息类型名称，最后以 以`"`结束。</span><span class="sxs-lookup"><span data-stu-id="62181-118">SharePoint DLP queries typically begin with the property  `SensitiveType:"` and an information type name from the [sensitive information types inventory](https://go.microsoft.com/fwlink/?LinkID=509999), and end with a  `"`.</span></span> <span data-ttu-id="62181-119">您还可以使用为组织创建的[自定义敏感信息类型](create-a-custom-sensitive-information-type.md)的名称。</span><span class="sxs-lookup"><span data-stu-id="62181-119">You can also use the name of a [custom sensitive information type](create-a-custom-sensitive-information-type.md) that you created for your organization.</span></span> <span data-ttu-id="62181-120">例如，您可能要尋找包含信用卡號碼的文件。</span><span class="sxs-lookup"><span data-stu-id="62181-120">For example, you might be looking for documents that contain credit card numbers.</span></span> <span data-ttu-id="62181-121">在这种情况下，您将使用以下格式： `SensitiveType:"Credit Card Number"`。</span><span class="sxs-lookup"><span data-stu-id="62181-121">In such an instance, you'd use the following format:  `SensitiveType:"Credit Card Number"`.</span></span> <span data-ttu-id="62181-122">由于您不包括计数范围或置信区间，因此查询将返回检测到信用卡号的每个文档。</span><span class="sxs-lookup"><span data-stu-id="62181-122">Because you didn't include count range or confidence range, the query returns every document in which a credit card number is detected.</span></span> <span data-ttu-id="62181-123">這是您可以執行的最簡單的查詢，會傳回最多結果。</span><span class="sxs-lookup"><span data-stu-id="62181-123">This is the simplest query that you can run, and it returns the most results.</span></span> <span data-ttu-id="62181-124">請記住，敏感類型的拼字和空格有影響。</span><span class="sxs-lookup"><span data-stu-id="62181-124">Keep in mind that the spelling and spacing of the sensitive type matters.</span></span> 
  
### <a name="ranges---optional"></a><span data-ttu-id="62181-125">範圍 - 選用</span><span class="sxs-lookup"><span data-stu-id="62181-125">Ranges - optional</span></span>

<span data-ttu-id="62181-126">接下来的两个部分都是范围，因此让我们快速检查一个范围的外观。</span><span class="sxs-lookup"><span data-stu-id="62181-126">Both of the next two parts are ranges, so let's quickly examine what a range looks like.</span></span> <span data-ttu-id="62181-127">在 SharePoint DLP 查询中，基本范围由两个按句点分隔的数字表示，如下所示： `[number]..[number]`。</span><span class="sxs-lookup"><span data-stu-id="62181-127">In SharePoint DLP queries, a basic range is represented by two numbers separated by two periods, which looks like this:  `[number]..[number]`.</span></span> <span data-ttu-id="62181-128">例如，如果使用，`10..20`该范围将捕获从 10 到 20 的数字。</span><span class="sxs-lookup"><span data-stu-id="62181-128">For instance, if  `10..20` is used, that range would capture numbers from 10 through 20.</span></span> <span data-ttu-id="62181-129">有許多不同的範圍組合，本主題涵蓋其中一些組合。</span><span class="sxs-lookup"><span data-stu-id="62181-129">There are many different range combinations and several are covered in this topic.</span></span> 
  
<span data-ttu-id="62181-130">让我们向查询添加计数范围。</span><span class="sxs-lookup"><span data-stu-id="62181-130">Let's add a count range to the query.</span></span> <span data-ttu-id="62181-131">可以使用计数范围来定义文档在包含查询结果之前需要包含的敏感信息的匹配次数。</span><span class="sxs-lookup"><span data-stu-id="62181-131">You can use count range to define the number of occurrences of sensitive information a document needs to contain before it's included in the query results.</span></span> <span data-ttu-id="62181-132">例如，如果希望查询仅返回仅包含五个信用卡号的文档，请使用： `SensitiveType:"Credit Card Number|5"`。</span><span class="sxs-lookup"><span data-stu-id="62181-132">For example, if you want your query to return only documents that contain exactly five credit card numbers, use this:  `SensitiveType:"Credit Card Number|5"`.</span></span> <span data-ttu-id="62181-133">計數範圍也可以協助您識別有高度風險的文件。</span><span class="sxs-lookup"><span data-stu-id="62181-133">Count range can also help you identify documents that pose high degrees of risk.</span></span> <span data-ttu-id="62181-134">例如，您的組織可能會將具有 5 個以上信用卡號碼的文件視為高風險。</span><span class="sxs-lookup"><span data-stu-id="62181-134">For example, your organization might consider documents with five or more credit card numbers a high risk.</span></span> <span data-ttu-id="62181-135">要查找符合此条件的文档，请使用此查询： `SensitiveType:"Credit Card Number|5.."`。</span><span class="sxs-lookup"><span data-stu-id="62181-135">To find documents fitting this criterion, you would use this query:  `SensitiveType:"Credit Card Number|5.."`.</span></span> <span data-ttu-id="62181-136">或者，您可以使用以下查询查找具有 5 个或更少信用卡号的文档： `SensitiveType:"Credit Card Number|..5"`。</span><span class="sxs-lookup"><span data-stu-id="62181-136">Alternatively, you can find documents with five or fewer credit card numbers by using this query:  `SensitiveType:"Credit Card Number|..5"`.</span></span> 
  
#### <a name="confidence-range"></a><span data-ttu-id="62181-137">信賴範圍</span><span class="sxs-lookup"><span data-stu-id="62181-137">Confidence range</span></span>

<span data-ttu-id="62181-138">最後，信賴範圍是已偵測之敏感類型實際符合的信賴等級。</span><span class="sxs-lookup"><span data-stu-id="62181-138">Finally, confidence range is the level of confidence that the detected sensitive type is actually a match.</span></span> <span data-ttu-id="62181-139">信賴範圍值的運作方式與計數範圍類似。</span><span class="sxs-lookup"><span data-stu-id="62181-139">The values for confidence range work similarly to count range.</span></span> <span data-ttu-id="62181-140">您不用包含計數範圍也可以形成查詢。</span><span class="sxs-lookup"><span data-stu-id="62181-140">You can form a query without including a count range.</span></span> <span data-ttu-id="62181-141">例如，要搜索具有任意数量的信用卡号的文档（只要置信区间为 85% 或更高），可以使用以下查询： `SensitiveType:"Credit Card Number|*|85.."`。</span><span class="sxs-lookup"><span data-stu-id="62181-141">For example, to search for documents with any number of credit card numbers—as long as the confidence range is 85 percent or higher—you would use this query:  `SensitiveType:"Credit Card Number|*|85.."`.</span></span> 
  
> [!IMPORTANT]
> <span data-ttu-id="62181-142">星号 （ `*`） 是一个通配符，表示任何值都有效。</span><span class="sxs-lookup"><span data-stu-id="62181-142">The asterisk ( `*`) is a wildcard character that means any value works.</span></span> <span data-ttu-id="62181-143">您可以在计数范围或置信范围内使用`*`通配符 （ ），但不能在敏感类型中使用。</span><span class="sxs-lookup"><span data-stu-id="62181-143">You can use the wildcard character ( `*`) either in the count range or in the confidence range, but not in a sensitive type.</span></span> 
  
### <a name="additional-query-properties-and-search-operators-available-in-the-ediscovery-center"></a><span data-ttu-id="62181-144">可以在 eDiscovery 中心取得的其他查詢屬性和搜尋運算子</span><span class="sxs-lookup"><span data-stu-id="62181-144">Additional query properties and search operators available in the eDiscovery Center</span></span>

<span data-ttu-id="62181-145">SharePoint 中的 DLP 还引入了"最后敏感内容Scan"属性，它可以帮助您搜索在特定时间范围内扫描的文件。</span><span class="sxs-lookup"><span data-stu-id="62181-145">DLP in SharePoint also introduces the LastSensitiveContentScan property, which can help you search for files scanned within a specific timeframe.</span></span> <span data-ttu-id="62181-146">有关属性`LastSensitiveContentScan`的查询示例，请参阅下一节中[的复杂查询示例。](#examples-of-complex-queries)</span><span class="sxs-lookup"><span data-stu-id="62181-146">For query examples with the  `LastSensitiveContentScan` property, see the [Examples of complex queries](#examples-of-complex-queries) in the next section.</span></span> 
  
<span data-ttu-id="62181-147">您不仅可以使用特定于 DLP 的属性来创建查询，还可以使用标准 SharePoint 电子数据展示搜索属性（`Author`如`FileExtension`或 ）。</span><span class="sxs-lookup"><span data-stu-id="62181-147">You can use not only DLP-specific properties to create a query, but also standard SharePoint eDiscovery search properties such as  `Author` or  `FileExtension`.</span></span> <span data-ttu-id="62181-148">您可以使用運算子來建立複雜查詢。</span><span class="sxs-lookup"><span data-stu-id="62181-148">You can use operators to build complex queries.</span></span> <span data-ttu-id="62181-149">有关可用属性和运算符的列表，请参阅[使用搜索属性和运算符与电子数据展示](https://go.microsoft.com/fwlink/?LinkId=510093)博客文章。</span><span class="sxs-lookup"><span data-stu-id="62181-149">For the list of available properties and operators, see the [Using Search Properties and Operators with eDiscovery](https://go.microsoft.com/fwlink/?LinkId=510093) blog post.</span></span> 
  
## <a name="examples-of-complex-queries"></a><span data-ttu-id="62181-150">範例</span><span class="sxs-lookup"><span data-stu-id="62181-150">Examples of complex queries</span></span>

<span data-ttu-id="62181-151">以下示例使用不同的敏感类型、属性和运算符来说明如何优化查询以准确查找要查找的内容。</span><span class="sxs-lookup"><span data-stu-id="62181-151">The following examples use different sensitive types, properties, and operators to illustrate how you can refine your queries to find exactly what you're looking for.</span></span>
  
|<span data-ttu-id="62181-152">**Query**</span><span class="sxs-lookup"><span data-stu-id="62181-152">**Query**</span></span>|<span data-ttu-id="62181-153">**說明**</span><span class="sxs-lookup"><span data-stu-id="62181-153">**Explanation**</span></span>|
|:-----|:-----|
| `SensitiveType:"International Banking Account Number (IBAN)"` <br/> |<span data-ttu-id="62181-154">名称可能看起来很奇怪，因为它太长，但它是该敏感类型的正确名称。</span><span class="sxs-lookup"><span data-stu-id="62181-154">The name might seem strange because it's so long, but it's the correct name for that sensitive type.</span></span> <span data-ttu-id="62181-155">请确保使用[敏感信息类型清单](https://go.microsoft.com/fwlink/?LinkID=509999)中的确切名称。</span><span class="sxs-lookup"><span data-stu-id="62181-155">Make sure to use exact names from the [sensitive information types inventory](https://go.microsoft.com/fwlink/?LinkID=509999).</span></span> <span data-ttu-id="62181-156">您还可以使用为组织创建的[自定义敏感信息类型](create-a-custom-sensitive-information-type.md)的名称。</span><span class="sxs-lookup"><span data-stu-id="62181-156">You can also use the name of a [custom sensitive information type](create-a-custom-sensitive-information-type.md) that you created for your organization.</span></span>  <br/> |
| `SensitiveType:"Credit Card Number|1..4294967295|1..100"` <br/> |<span data-ttu-id="62181-157">这将返回与敏感类型"信用卡号"至少匹配一个文档的文档。</span><span class="sxs-lookup"><span data-stu-id="62181-157">This returns documents with at least one match to the sensitive type "Credit Card Number."</span></span> <span data-ttu-id="62181-158">每個範圍的值分別是最小值與最大值。</span><span class="sxs-lookup"><span data-stu-id="62181-158">The values for each range are the respective minimum and maximum values.</span></span> <span data-ttu-id="62181-159">编写此查询的更简单`SensitiveType:"Credit Card Number"`方法是，但其中的乐趣在哪里？</span><span class="sxs-lookup"><span data-stu-id="62181-159">A simpler way to write this query is  `SensitiveType:"Credit Card Number"`, but where's the fun in that?</span></span>  <br/> |
| `SensitiveType:"Credit Card Number| 5..25" AND LastSensitiveContentScan:"8/11/2018..8/13/2018"` <br/> |<span data-ttu-id="62181-160">这将返回 2018 年 8 月 11 日至 2018 年 8 月 13 日期间扫描的 5-25 个信用卡号的文档。</span><span class="sxs-lookup"><span data-stu-id="62181-160">This returns documents with 5-25 credit card numbers that were scanned from August 11, 2018 through August 13, 2018.</span></span>  <br/> |
| `SensitiveType:"Credit Card Number| 5..25" AND LastSensitiveContentScan:"8/11/2018..8/13/2018" NOT FileExtension:XLSX` <br/> |<span data-ttu-id="62181-161">这将返回 2018 年 8 月 11 日至 2018 年 8 月 13 日期间扫描的 5-25 个信用卡号的文档。</span><span class="sxs-lookup"><span data-stu-id="62181-161">This returns documents with 5-25 credit card numbers that were scanned from August 11, 2018 through August 13, 2018.</span></span> <span data-ttu-id="62181-162">具有 XLSX 扩展名的文件不包括在查询结果中。</span><span class="sxs-lookup"><span data-stu-id="62181-162">Files with an XLSX extension aren't included in the query results.</span></span>  <span data-ttu-id="62181-163">`FileExtension`是可以在查询中包含的许多属性之一。</span><span class="sxs-lookup"><span data-stu-id="62181-163">`FileExtension` is one of many properties that you can include in a query.</span></span> <span data-ttu-id="62181-164">有关详细信息，请参阅[使用搜索属性和运算符与电子数据。](https://go.microsoft.com/fwlink/?LinkId=510093)</span><span class="sxs-lookup"><span data-stu-id="62181-164">For more information, see [Using Search Properties and Operators with eDiscovery](https://go.microsoft.com/fwlink/?LinkId=510093).</span></span>  <br/> |
| `SensitiveType:"Credit Card Number" OR SensitiveType:"U.S. Social Security Number (SSN)"` <br/> |<span data-ttu-id="62181-165">這會傳回包含信用卡號碼或身分證字號的文件。</span><span class="sxs-lookup"><span data-stu-id="62181-165">This returns documents that contain either a credit card number or a social security number.</span></span>  <br/> |
   
## <a name="examples-of-queries-to-avoid"></a><span data-ttu-id="62181-166">範例</span><span class="sxs-lookup"><span data-stu-id="62181-166">Examples of queries to avoid</span></span>

<span data-ttu-id="62181-167">並非所有查詢都可以同等建立。</span><span class="sxs-lookup"><span data-stu-id="62181-167">Not all queries are created equal.</span></span> <span data-ttu-id="62181-168">下表提供了在 SharePoint 中不与 DLP 配合的查询示例，并说明了原因。</span><span class="sxs-lookup"><span data-stu-id="62181-168">The following table gives examples of queries that don't work with DLP in SharePoint and describes why.</span></span>
  
|<span data-ttu-id="62181-169">**不受支援的查詢**</span><span class="sxs-lookup"><span data-stu-id="62181-169">**Unsupported query**</span></span>|<span data-ttu-id="62181-170">**原因**</span><span class="sxs-lookup"><span data-stu-id="62181-170">**Reason**</span></span>|
|:-----|:-----|
| `SensitiveType:"Credit Card Number|.."` <br/> |<span data-ttu-id="62181-171">您必須至少新增一個數值。</span><span class="sxs-lookup"><span data-stu-id="62181-171">You must add at least one number.</span></span>  <br/> |
| `SensitiveType:"NotARule"` <br/> |<span data-ttu-id="62181-172">"NotARule"不是有效的敏感类型名称。</span><span class="sxs-lookup"><span data-stu-id="62181-172">"NotARule" isn't a valid sensitive type name.</span></span> <span data-ttu-id="62181-173">只有[敏感信息类型](https://go.microsoft.com/fwlink/?LinkID=509999)中的名称在 DLP 查询中工作。</span><span class="sxs-lookup"><span data-stu-id="62181-173">Only names in the [sensitive information types inventory](https://go.microsoft.com/fwlink/?LinkID=509999) work in DLP queries.</span></span>  <br/> |
| `SensitiveType:"Credit Card Number|0"` <br/> |<span data-ttu-id="62181-174">零作为范围内的最小值或最大值无效。</span><span class="sxs-lookup"><span data-stu-id="62181-174">Zero isn't valid as either the minimum value or the maximum value in a range.</span></span>  <br/> |
| `SensitiveType:"Credit Card Number"` <br/> |<span data-ttu-id="62181-175">可能很难看到，但"信用"和"卡"之间有额外的空白，使查询无效。</span><span class="sxs-lookup"><span data-stu-id="62181-175">It's might be difficult to see, but there's extra white space between "Credit" and "Card" that makes the query invalid.</span></span> <span data-ttu-id="62181-176">使用[敏感信息类型清单](https://go.microsoft.com/fwlink/?LinkID=509999)中的确切敏感类型名称。</span><span class="sxs-lookup"><span data-stu-id="62181-176">Use exact sensitive type names from the [sensitive information types inventory](https://go.microsoft.com/fwlink/?LinkID=509999).</span></span>  <br/> |
| `SensitiveType:"Credit Card Number|1. .3"` <br/> |<span data-ttu-id="62181-177">两个周期部分不应用空格分隔。</span><span class="sxs-lookup"><span data-stu-id="62181-177">The two-period portion shouldn't be separated by a space.</span></span>  <br/> |
| `SensitiveType:"Credit Card Number| |1..|80.."` <br/> |<span data-ttu-id="62181-178">管道分隔符太多（</span><span class="sxs-lookup"><span data-stu-id="62181-178">There are too many pipe delimiters (</span></span>|<span data-ttu-id="62181-179">).</span><span class="sxs-lookup"><span data-stu-id="62181-179"></span></span> <span data-ttu-id="62181-180">请改用以下格式：`SensitiveType: "Credit Card Number|1..|80.."`</span><span class="sxs-lookup"><span data-stu-id="62181-180">Follow this format instead: `SensitiveType: "Credit Card Number|1..|80.."`</span></span> <br/> |
| `SensitiveType:"Credit Card Number|1..|80..101"` <br/> |<span data-ttu-id="62181-181">由于置信度值表示百分比，因此不能超过 100。</span><span class="sxs-lookup"><span data-stu-id="62181-181">Because confidence values represent a percentage, they can't exceed 100.</span></span> <span data-ttu-id="62181-182">請改為選擇 1 到 100 的數字。</span><span class="sxs-lookup"><span data-stu-id="62181-182">Choose a number from 1 through 100 instead.</span></span>  <br/> |
   
## <a name="for-more-information"></a><span data-ttu-id="62181-183">相關資訊</span><span class="sxs-lookup"><span data-stu-id="62181-183">For more information</span></span>

[<span data-ttu-id="62181-184">機密資訊類型在找什麼</span><span class="sxs-lookup"><span data-stu-id="62181-184">What the sensitive information types look for</span></span>](what-the-sensitive-information-types-look-for.md)
  
[<span data-ttu-id="62181-185">在 Office 365 安全&amp;合规性中心运行内容搜索</span><span class="sxs-lookup"><span data-stu-id="62181-185">Run a Content Search in the Office 365 Security &amp; Compliance Center</span></span>](run-a-content-search-in-the-security-and-compliance-center.md)
  
[<span data-ttu-id="62181-186">內容搜尋的關鍵字查詢與搜尋條件</span><span class="sxs-lookup"><span data-stu-id="62181-186">Keyword queries and search conditions for Content Search</span></span>](keyword-queries-and-search-conditions.md)
  

