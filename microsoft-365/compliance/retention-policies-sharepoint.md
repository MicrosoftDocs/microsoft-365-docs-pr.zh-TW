---
title: 瞭解 SharePoint 和 OneDrive 的保留功能
f1.keywords:
- NOCSH
ms.author: cabailey
author: cabailey
manager: laurawi
ms.date: ''
audience: Admin
ms.topic: conceptual
ms.service: O365-seccomp
localization_priority: Priority
ms.collection:
- M365-security-compliance
- SPO_Content
search.appverid:
- MOE150
- MET150
description: 瞭解保留功能在 SharePoint 以及 OneDrive 中的運作方式。
ms.openlocfilehash: f19f452a01c093d08dbeed38a34756dcaf7a4e95
ms.sourcegitcommit: e8b9a4f18330bc09f665aa941f1286436057eb28
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/14/2020
ms.locfileid: "45127400"
---
# <a name="learn-about-retention-for-sharepoint-and-onedrive"></a><span data-ttu-id="49123-103">瞭解 SharePoint 和 OneDrive 的保留功能</span><span class="sxs-lookup"><span data-stu-id="49123-103">Learn about retention for SharePoint and OneDrive</span></span>

><span data-ttu-id="49123-104">*[Microsoft 365 安全性與合規性的授權指引](https://aka.ms/ComplianceSD)。*</span><span class="sxs-lookup"><span data-stu-id="49123-104">*[Microsoft 365 licensing guidance for security & compliance](https://aka.ms/ComplianceSD).*</span></span>

<span data-ttu-id="49123-105">本文中的資訊補充了[瞭解保留功能](retention.md)的資訊，因為其資訊涵蓋了 SharePoint 和 OneDrive 專用的資訊。</span><span class="sxs-lookup"><span data-stu-id="49123-105">The information in this article supplements [Learn about retention](retention.md) because it has information that's specific to SharePoint and OneDrive.</span></span>

## <a name="how-retention-works-for-sharepoint-and-onedrive"></a><span data-ttu-id="49123-106">保留功能在 SharePoint 以及 [OneDrive] 中的運作方式。</span><span class="sxs-lookup"><span data-stu-id="49123-106">How retention works for SharePoint and OneDrive</span></span>

<span data-ttu-id="49123-107">若要支援保留，SharePoint 和 OneDrive 會建立一個 [文件保留庫]（如果沒有的話）。</span><span class="sxs-lookup"><span data-stu-id="49123-107">To support retention, SharePoint and OneDrive creates a Preservation Hold library if one doesn't exist.</span></span> <span data-ttu-id="49123-108">您可以在網站集合的頂層網站中的 [網站內容]\*\*\*\* 頁面上檢視此文件庫。</span><span class="sxs-lookup"><span data-stu-id="49123-108">You can view this library on the **Site contents** page in the top-level site of the site collection.</span></span> <span data-ttu-id="49123-109">文件保留庫僅供網站集合系統管理員檢視，大部分的使用者都無法檢視。</span><span class="sxs-lookup"><span data-stu-id="49123-109">Most users can't view the Preservation Hold library because it's visible only to site collection administrators.</span></span>
  
<span data-ttu-id="49123-110">如果有人嘗試變更或刪除已受保留設置規範的文件檔案，在將保留設定套用到檔案時，不論檔案的內容是否已進行變更，都會進行檔案檢查。</span><span class="sxs-lookup"><span data-stu-id="49123-110">If somebody attempts to change or delete a document that's subject to retention settings, a check is made whether the content's been changed since the retention settings were applied.</span></span> <span data-ttu-id="49123-111">如果這是套用原則後的第一次變更，檔案的內容會先被複製到 [文件保留庫]，然後允許使用者變更或刪除原始內容。</span><span class="sxs-lookup"><span data-stu-id="49123-111">If this is the first change since the retention settings were applied, the content is copied to the Preservation Hold library, which allows the person to change or delete the original content.</span></span> <span data-ttu-id="49123-112">您可以將網站集合中的任何內容，複製到 [文件保留庫]，不需套用保留設定。</span><span class="sxs-lookup"><span data-stu-id="49123-112">Any content in a site collection can be copied to the Preservation Hold library, independently from retention settings.</span></span>
  
<span data-ttu-id="49123-113">計時器工作會定期清理 [文件保留庫]。</span><span class="sxs-lookup"><span data-stu-id="49123-113">A timer job periodically cleans up the Preservation Hold library.</span></span> <span data-ttu-id="49123-114">此工作會將 [文件保留庫] 中的所有內容和以內容設有保留設置的所有查詢進行比較。</span><span class="sxs-lookup"><span data-stu-id="49123-114">This job compares all content in the Preservation Hold library to all queries used by the retention settings for that content.</span></span> <span data-ttu-id="49123-115">比其設定的保留期間更舊的內容會從文件保留庫中刪除，以及從原始位置刪除 (如果仍然存在)。</span><span class="sxs-lookup"><span data-stu-id="49123-115">Content that is older than their configured retention period is deleted from the Preservation Hold library, and the original location if it is still there.</span></span> <span data-ttu-id="49123-116">此計時器工作會每隔七天執行一次，這表示要刪除內容最多可能需要七天的時間。</span><span class="sxs-lookup"><span data-stu-id="49123-116">This timer job runs every seven days, which means that it can take up to seven days for content to be deleted.</span></span>
  
<span data-ttu-id="49123-117">這項行為可使用在套用保留原則時已存在的內容。</span><span class="sxs-lookup"><span data-stu-id="49123-117">This behavior applies to content that exists when the retention settings were applied.</span></span> <span data-ttu-id="49123-118">除外，針對保留原則，任何在納入原則後的新增或建立在網站集合的新內容都將在刪除之後仍將保留。</span><span class="sxs-lookup"><span data-stu-id="49123-118">In addition, for retention policies, any new content that's created or added to the site collection after it was included in the policy will be retained after deletion.</span></span> <span data-ttu-id="49123-119">不過，新內容在第一次編輯時並不會複製到文件保留庫，而只有在刪除時才會。</span><span class="sxs-lookup"><span data-stu-id="49123-119">However, new content isn't copied to the Preservation Hold library the first time it's edited, only when it's deleted.</span></span> <span data-ttu-id="49123-120">若要保留檔案的所有版本，您必須開啟[版本設定](#how-retention-works-with-document-versions-in-a-site-collection)。</span><span class="sxs-lookup"><span data-stu-id="49123-120">To retain all versions of a file, you must turn on [versioning](#how-retention-works-with-document-versions-in-a-site-collection).</span></span>
  
<span data-ttu-id="49123-121">如果使用者嘗試刪除受保留原則保護的文件庫、清單、資料夾或網站，則會收到錯誤。</span><span class="sxs-lookup"><span data-stu-id="49123-121">A user receives an error if they try to delete a library, list, folder, or site that's subject to a retention policy.</span></span> <span data-ttu-id="49123-122">如果先移動或刪除受到原則保護之資料夾中的檔案，那麼使用者就可以刪除該資料夾。</span><span class="sxs-lookup"><span data-stu-id="49123-122">A user can delete a folder if they first move or delete any files in the folder that are subject to the policy.</span></span> <span data-ttu-id="49123-123">此外，[文件保留庫] 會在此階段建立，而不是在您建立保留原則或套用保留標籤時建立。</span><span class="sxs-lookup"><span data-stu-id="49123-123">Also, the Preservation Hold library is created at this stage, and not when you create a retention policy or apply a retention label.</span></span> <span data-ttu-id="49123-124">這表示，若要測試原則，您必須先編輯/刪除網站中受保留原則規範、或已套用保留標籤的文件檔案，然後瀏覽至 [文件保留庫] 檢視保留的複本。</span><span class="sxs-lookup"><span data-stu-id="49123-124">This means that to test retention, you must first edit or delete a document in a site that's subject to a retention policy or that has a retention label applied, and then browse to the Preservation Hold library to view the retained copy.</span></span>
  
<span data-ttu-id="49123-125">將保留原則指派至 OneDrive 帳戶或 SharePoint 網站後，內容的路徑會根據保留原則為保留和刪除、僅保留或僅刪除。</span><span class="sxs-lookup"><span data-stu-id="49123-125">After retention settings are assigned to content in a OneDrive account or SharePoint site, the paths the content takes depend on whether the retention settings are to retain and delete, to retain only, or delete only.</span></span>

<span data-ttu-id="49123-126">當保留設定為保留及刪除時：</span><span class="sxs-lookup"><span data-stu-id="49123-126">When the retention setting are to retain and delete:</span></span>

![SharePoint 和 OneDrive 中內容生命週期的圖表](../media/Retention_Diagram_of_retention_flow_in_sites.png)
  
1. <span data-ttu-id="49123-128">若已在保留期間**修改或刪除內容**，即會在文件保留庫中建立指派保留原則時即存在之原始內容的複本。</span><span class="sxs-lookup"><span data-stu-id="49123-128">**If the content is modified or deleted** during the retention period, a copy of the original content as it existed when the retention policy was assigned is created in the Preservation Hold library.</span></span> <span data-ttu-id="49123-129">此時，計時器工作會識別保留期間已過期的項目。</span><span class="sxs-lookup"><span data-stu-id="49123-129">There, the timer job identifies items whose retention period has expired.</span></span> <span data-ttu-id="49123-130">這些項目會移到第二階段資源回收筒，並在 93 天結束時永久刪除。</span><span class="sxs-lookup"><span data-stu-id="49123-130">Those items are moved to the second-stage Recycle Bin, where they're permanently deleted at the end of 93 days.</span></span> <span data-ttu-id="49123-131">使用者看不到第二階段資源回收筒 (只能看到第一階段資源回收筒)，但網站集合管理員可以檢視並從該處還原內容。</span><span class="sxs-lookup"><span data-stu-id="49123-131">The second-stage Recycle Bin is not visible to end users (only the first-stage Recycle Bin is), but site collection admins can view and restore content from there.</span></span>

    > [!NOTE]
    > <span data-ttu-id="49123-132">為了防止意外的資料遺失，我們不再永久刪除保留文件庫中的內容。</span><span class="sxs-lookup"><span data-stu-id="49123-132">To help prevent inadvertent data loss, we no longer permanently delete content from the Preservation Hold library.</span></span> <span data-ttu-id="49123-133">相反地，我們只會從資源回收筒中永久刪除內容。因此，來自保留文件庫的所有內容，現在將會移至第二階段資源回收筒。</span><span class="sxs-lookup"><span data-stu-id="49123-133">Instead, we permanently delete content only from the Recycle Bin, so all content from the Preservation Hold library now goes through the second-stage Recycle Bin.</span></span>
    
2. <span data-ttu-id="49123-134">**如果未在保留期間修改或刪除內容**，計時器工作會在保留期間結束時將此內容移至第一階段資源回收筒。</span><span class="sxs-lookup"><span data-stu-id="49123-134">**If the content is not modified or deleted** during the retention period, the timer job moves this content to the first-stage Recycle Bin at the end of the retention period.</span></span> <span data-ttu-id="49123-135">如果使用者從此處刪除內容，或清空此資源回收筒 (也就是清除)，則會將文件移至第二階段資源回收筒。</span><span class="sxs-lookup"><span data-stu-id="49123-135">If a user deletes the content from there or empties this Recycle Bin (also known as purging), the document is moved to the second-stage Recycle Bin.</span></span> <span data-ttu-id="49123-136">93 天保留期間涵蓋了第一和第二階段資源回收筒。93 天結束時，則會從文件所在的任何位置永久刪除文件 (無論是第一或第二階段資源回收筒)。</span><span class="sxs-lookup"><span data-stu-id="49123-136">A 93-day retention period spans both the first- and second-stage recycle bins. At the end of 93 days, the document is permanently deleted from wherever it resides, in either the first-stage or second-stage Recycle Bin.</span></span> <span data-ttu-id="49123-137">系統並未對資源回收筒編製索引，因此無法提供搜尋。</span><span class="sxs-lookup"><span data-stu-id="49123-137">The Recycle Bin is not indexed and therefore unavailable for searching.</span></span> <span data-ttu-id="49123-138">如此一來，電子文件探索搜尋就找不到可放置保留的資源回收筒內容。</span><span class="sxs-lookup"><span data-stu-id="49123-138">As a result, an eDiscovery search can't find any Recycle Bin content on which to place a hold.</span></span>

<span data-ttu-id="49123-139">當保留設定為僅保留或僅刪除時，內容路徑為保留和刪除的變化：</span><span class="sxs-lookup"><span data-stu-id="49123-139">When the retention settings are retain-only, or delete-only, the contents paths are variations of retain and delete:</span></span>

### <a name="content-paths-for-retain-only-retention-settings"></a><span data-ttu-id="49123-140">僅保留保留設定的內容路徑</span><span class="sxs-lookup"><span data-stu-id="49123-140">Content paths for retain-only retention settings</span></span>

1. <span data-ttu-id="49123-141">在保留期間，**如果內容已修改或刪除**：原始文件的複本會在文件保留庫內建立，並保留到保留期間結束時，然後文件保留庫內的複本會移至第二階段資源回收筒，並在 93 天後永久刪除。</span><span class="sxs-lookup"><span data-stu-id="49123-141">**If the content is modified or deleted** during the retention period: A copy of the original document is created in the Preservation Hold library and retained until the end of the retention period, when the copy in the Preservation Hold library is moved to the second-stage Recycle Bin and is permanently deleted after 93 days.</span></span>

2. <span data-ttu-id="49123-142">在保留期間，**如果未修改或刪除內容**：保留期間前後沒有任何變化；文件仍會保留在其原始位置。</span><span class="sxs-lookup"><span data-stu-id="49123-142">**If the content is not modified or deleted** during the retention period: Nothing happens before and after the retention period; the document remains in its original location.</span></span>

### <a name="content-paths-for-delete-only-retention-settings"></a><span data-ttu-id="49123-143">僅刪除保留設定的內容路徑</span><span class="sxs-lookup"><span data-stu-id="49123-143">Content paths for delete-only retention settings</span></span>

1. <span data-ttu-id="49123-144">**如果在設定的保留期間刪除內容**：文件會移至第一階段資源回收筒。</span><span class="sxs-lookup"><span data-stu-id="49123-144">**If the content is deleted** during the configured period: The document is moved to first-stage Recycle Bin.</span></span> <span data-ttu-id="49123-145">如果使用者從此處刪除文件，或清空此資源回收筒，則會將文件移至第二階段資源回收筒。</span><span class="sxs-lookup"><span data-stu-id="49123-145">If a user deletes the document from there or empties this Recycle Bin, the document is moved to the second-stage Recycle Bin.</span></span> <span data-ttu-id="49123-146">93 天保留期間涵蓋了第一和第二階段資源回收筒。93 天結束時，則會從文件所在的任何位置永久刪除文件 (無論是第一或第二階段資源回收筒)。</span><span class="sxs-lookup"><span data-stu-id="49123-146">A 93-day retention period spans both the first-stage and second-stage recycle bins. At the end of 93 days, the document is permanently deleted from wherever it resides, in either the first-stage or second-stage Recycle Bin.</span></span> <span data-ttu-id="49123-147">如果在設定的期間修改內容，則在保留期間後會遵循相同的刪除路徑。</span><span class="sxs-lookup"><span data-stu-id="49123-147">If the content is modified during the configured period, it follows the same deletion path after the configured period.</span></span>

2. <span data-ttu-id="49123-148">**如果未在設定的保留期間刪除內容**：在設定的保留期間結束時，系統會將文件移至第一階段資源回收筒。</span><span class="sxs-lookup"><span data-stu-id="49123-148">**If the content is not deleted** during the configured period: At the end of the configured period in the retention policy, the document is moved to the first-stage Recycle Bin.</span></span> <span data-ttu-id="49123-149">如果使用者從此處刪除文件，或清空此資源回收筒 (也就是清除)，則會將文件移至第二階段資源回收筒。</span><span class="sxs-lookup"><span data-stu-id="49123-149">If a user deletes the document from there or empties this Recycle Bin (also known as purging), the document is moved to the second-stage Recycle Bin.</span></span> <span data-ttu-id="49123-150">93 天保留期間涵蓋了第一和第二階段資源回收筒。93 天結束時，則會從文件所在的任何位置永久刪除文件 (無論是第一或第二階段資源回收筒)。</span><span class="sxs-lookup"><span data-stu-id="49123-150">A 93-day retention period spans both the first-stage and second-stage recycle bins. At the end of 93 days, the document is permanently deleted from wherever it resides, in either the first-stage or second-stage Recycle Bin.</span></span> <span data-ttu-id="49123-151">系統並未對資源回收筒編製索引，因此無法提供搜尋。</span><span class="sxs-lookup"><span data-stu-id="49123-151">The Recycle Bin is not indexed and therefore unavailable for searching.</span></span> <span data-ttu-id="49123-152">如此一來，電子文件探索搜尋就找不到可放置保留的資源回收筒內容。</span><span class="sxs-lookup"><span data-stu-id="49123-152">As a result, an eDiscovery search can't find any Recycle Bin content on which to place a hold.</span></span>

## <a name="how-retention-works-with-document-versions-in-a-site-collection"></a><span data-ttu-id="49123-153">保留原則如何使用網站集合中的文件檔案版本</span><span class="sxs-lookup"><span data-stu-id="49123-153">How retention works with document versions in a site collection</span></span>

<span data-ttu-id="49123-154">版本設定是 SharePoint 和 OneDrive 中所有文件庫的功能。</span><span class="sxs-lookup"><span data-stu-id="49123-154">Versioning is a feature of all document libraries in SharePoint and OneDrive.</span></span> <span data-ttu-id="49123-155">根據預設，版本設定會最少保留 500 個主要版本，不過您可以增加此限制。</span><span class="sxs-lookup"><span data-stu-id="49123-155">By default, versioning retains a minimum of 500 major versions, though you can increase this limit.</span></span> <span data-ttu-id="49123-156">如需詳細資訊，請參閱[啟用和設定清單或文件庫的版本設定](https://support.office.com/article/1555d642-23ee-446a-990a-bcab618c7a37)。</span><span class="sxs-lookup"><span data-stu-id="49123-156">For more information, see [Enable and configure versioning for a list or library](https://support.office.com/article/1555d642-23ee-446a-990a-bcab618c7a37).</span></span>
  
<span data-ttu-id="49123-157">僅保留原則設定會保留在 SharePoint 網站集合或 OneDrive 帳戶中所有版本的文件檔案。</span><span class="sxs-lookup"><span data-stu-id="49123-157">Retain-only settings retain all versions of a document in a SharePoint site collection or OneDrive account.</span></span> <span data-ttu-id="49123-158">在首次編輯受到保留或僅保留原則規範的文件檔案時，原始文件檔案的版本就會被複製到 [文件保留庫]。</span><span class="sxs-lookup"><span data-stu-id="49123-158">When a document that is subject to a hold or retain-only retention settings is edited for the first time, a version of the original document is copied to the Preservation Hold library.</span></span> <span data-ttu-id="49123-159">若有啟用版本設定功能，在刪除受到保留或僅保留設定的時，該檔案的所有版本資訊都會複製到 [文件保留庫]。</span><span class="sxs-lookup"><span data-stu-id="49123-159">When a document that is subject to a hold or retain-only settings is deleted, all versions are copied to the Preservation Hold library if versioning is enabled.</span></span> <span data-ttu-id="49123-160">在 [文件保留庫] 中的每個文件版本都會以單一個別的項目儲存，並有各自不同的保留期間：</span><span class="sxs-lookup"><span data-stu-id="49123-160">Each version of a document in the Preservation Hold library exists as a separate item with its own retention period:</span></span>
  
- <span data-ttu-id="49123-161">如果保留期間是依照內容建立的時間作為計算基礎，則每個版本的有效期限皆與原始檔案相同。</span><span class="sxs-lookup"><span data-stu-id="49123-161">If the retention period is based on when the content was created, each version has the same expiration date as the original document.</span></span> <span data-ttu-id="49123-162">原始檔案及其不同的版本檔案皆會同時過期。</span><span class="sxs-lookup"><span data-stu-id="49123-162">The original document and its versions all expire at the same time.</span></span>

- <span data-ttu-id="49123-163">如果保留期間是依照內容的前次修改時間作為計算基礎，當原始檔案每次進行編修時就會產生不同的版本，其有效期限也就隨之不同。</span><span class="sxs-lookup"><span data-stu-id="49123-163">If the retention period is based on when the content was last modified, each version has its own expiration date based on when the original document was modified to create that version.</span></span> <span data-ttu-id="49123-164">原始檔案及其版本檔案的有效期限皆是獨立分開計算的。</span><span class="sxs-lookup"><span data-stu-id="49123-164">The original documents and its versions expire independently of each other.</span></span>

> [!NOTE]
> <span data-ttu-id="49123-165">電子文件探索工具無法搜尋保留版本的 SharePoint 和 OneDrive 文件。</span><span class="sxs-lookup"><span data-stu-id="49123-165">The preserved versions of SharePoint and OneDrive documents are not searchable by eDiscovery tools.</span></span>

## <a name="when-a-user-leaves-the-organization"></a><span data-ttu-id="49123-166">當使用者離開組織時</span><span class="sxs-lookup"><span data-stu-id="49123-166">When a user leaves the organization</span></span>

<span data-ttu-id="49123-167">**SharePoint**：</span><span class="sxs-lookup"><span data-stu-id="49123-167">**SharePoint**:</span></span>

<span data-ttu-id="49123-168">如果組織中的使用者離職，該使用者建立的任何內容將不受到影響，因為 SharePoint 被視為共同作業環境，與使用者的信箱或 OneDrive 帳戶不同。</span><span class="sxs-lookup"><span data-stu-id="49123-168">When a user leaves your organization, any content created by that user is not affected because SharePoint is considered a collaborative environment, unlike a user's mailbox or OneDrive account.</span></span>

<span data-ttu-id="49123-169">**OneDrive**：</span><span class="sxs-lookup"><span data-stu-id="49123-169">**OneDrive**:</span></span>

<span data-ttu-id="49123-170">如果組織中的使用者離職，任何受限於保留原則或含有保留標籤的檔案，在原則或標籤的保留期間內都會予以保留。</span><span class="sxs-lookup"><span data-stu-id="49123-170">If a user leaves your organization, any files that are subject to a retention policy or has a retention label will remain for the duration of the policy or label.</span></span> <span data-ttu-id="49123-171">在此期間，所有的共用存取權都持續有效。</span><span class="sxs-lookup"><span data-stu-id="49123-171">During that time period, all sharing access continues to work.</span></span> <span data-ttu-id="49123-172">當保留期間到期時，內容會移至 [網站集合資源回收筒] 中，且只有系統管理員可以存取這些檔案。如果保留原則將文件檔案標示為一份記錄，這些檔案會一直保留直到保留期間結束，之後便會將它們永久刪除。</span><span class="sxs-lookup"><span data-stu-id="49123-172">When the retention period expires, content moves into the Site Collection Recycle Bin and is not accessible to anyone except the admin. If a document is marked by a retention label as a record, the document will not be deleted until the retention period is over, after which time the content is permanently deleted.</span></span>

## <a name="configuration-guidance"></a><span data-ttu-id="49123-173">配置指導方針</span><span class="sxs-lookup"><span data-stu-id="49123-173">Configuration guidance</span></span>

<span data-ttu-id="49123-174">如果您已準備好在 Microsoft 365 中設定保留，請參閱 [開始使用保留原則及保留標籤](get-started-with-retention.md)。</span><span class="sxs-lookup"><span data-stu-id="49123-174">If you're ready to configure retention in Microsoft 365, see [Get started with retention policies and retention labels](get-started-with-retention.md).</span></span>
